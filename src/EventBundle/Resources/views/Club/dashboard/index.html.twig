{% extends 'backend/index.html.twig' %}
{% block stylsheets %}
{% endblock %}

{% block javascripts %}
    <script>
        $(document).ready(function () {
            var tableC = $('#eventsTab').DataTable({
                "paging": true,
                "stateSave": true,
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.10.13/i18n/French.json",
                }
            });
            var clubsTab = $('#clubsTab').DataTable({
                "paging": true,
                "stateSave": true,
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.10.13/i18n/French.json",
                }
            });
        });
    </script>


{% endblock %}
{% block content %}

    <section class="content">
        <div class="row">


            <div class="card card-borderless">
                <ul class="nav nav-tabs nav-tabs-simple hidden-sm-down" role="tablist"
                    data-init-reponsive-tabs="dropdownfx">
                    <li class="nav-item">
                        <a class="active" data-toggle="tab" role="tab" data-target="#clubs" href="#"
                           aria-expanded="true">Clubs</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" data-toggle="tab" role="tab" data-target="#events" class=""
                           aria-expanded="false">Evénements</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" id="clubs" aria-expanded="true">
                        <h1>Tout les clubs</h1>
                        <table id="clubsTab" class="table table-bordered" style="width: 100% !important;">
                            <thead>
                            <tr>
                                <th>Id</th>
                                <th>Titre</th>
                                <th>Description</th>
                                <th>Etat</th>
                                <th>Crée par</th>
                                <th>Responsable</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for club in clubs %}
                                {% if club.etat == "confirme" %}
                                    <tr class="archived">
                                {% else %}
                                    <tr>
                                {% endif %}
                                <td>#{{ club.id }}</td>
                                <td>{{ club.libelle }}</td>
                                <td id="descriptionCell">{{ club.description}}</td>
                                <td>{{ club.etat }}</td>
                                <td>{{ club.createdBy.username }}</td>
                                <td>
                                    {% if club.responsable %}
                                        {{ club.responsable.username }}
                                    {% else %}
                                        Aucun
                                    {% endif %}
                                </td>
                                <td>
                                    <div class="btn-group btn-group-sm btn-group-horizontal">
                                        <a class="btn btn-danger"
                                           href="{{ path('club_delete', { 'id': club.id }) }}"
                                           data-toggle="tooltip" title="Supprimer"><i class="fa fa-trash"></i>
                                        </a>
                                        {% if club.etat != "confirme" %}
                                            <a class="btn btn-success"
                                               href="{{ path('club_confirme', { 'id': club.id }) }}">
                                                Confimer </a>
                                        {% endif %}
                                    </div>
                                </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane" id="events" aria-expanded="false">
                        <h1>Tout les événements</h1>
                        <table id="eventsTab" class="table table-striped table-bordered"
                               style="width: 100% !important;">
                            <thead>
                            <tr>
                                <th>Libellé</th>
                                <th>Description</th>
                                <th>Lieu</th>
                                <th>Date</th>
                                <th>Nb. participants / Nb. places</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for e in events %}
                                <tr>
                                    <td>{{ e.libelle }}</td>
                                    <td>{{ e.description | raw }}</td>
                                    <td>{{ e.lieu }}</td>
                                    <td>{{ e.date | date('d/m/20y') }}</td>
                                    <td>{{ e.nbrParticipants }} / {{ e.nbrPlaces }} pers.</td>
                                    <td>
                                        <div class="btn-group btn-group-sm btn-group-horizontal">
                                            <a class="btn btn-danger"
                                               href="{{ path('event_delete', { 'id': e.id }) }}"
                                               data-toggle="tooltip" title="Supprimer cette e">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                            <a class="btn btn-secondary"
                                               href="{{ path('event_show', { 'id': e.id }) }}"
                                               data-toggle="tooltip" title="Afficher détail">
                                                <i class="fa fa-eye"></i>
                                            </a>
                                            <a class="btn btn-secondary"
                                               href="{{ path('event_edit', { 'id': e.id }) }}"
                                               data-toggle="tooltip" title="Modifier événément">
                                                <i class="fa fa-pencil"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


        </div>
    </section>
{% endblock %}